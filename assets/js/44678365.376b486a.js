"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[78],{6001:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"Administration Guide/Troubleshooting Guide","title":"Troubleshooting Guide","description":"The Troubleshooting Guide tries to provide solution orientied fixes to reported issues. If your issue is not on this please raise an issue or if you already have a solution please contribute it as a pull request.","source":"@site/docs/Administration Guide/Troubleshooting Guide.md","sourceDirName":"Administration Guide","slug":"/Administration Guide/Troubleshooting Guide","permalink":"/sas-portal-framework-for-sas-viya/Administration Guide/Troubleshooting Guide","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"Setup-Additional-UIs","permalink":"/sas-portal-framework-for-sas-viya/Administration Guide/Setup-Additional-UIs"},"next":{"title":"Introduction","permalink":"/sas-portal-framework-for-sas-viya/User Guide/Introduction"}}');var r=i(4848),s=i(8453);const o={},a="Troubleshooting Guide",l={},c=[{value:"SAS Intelligent Decisioning",id:"sas-intelligent-decisioning",level:2},{value:"Duplicate declaration for VARIABLE",id:"duplicate-declaration-for-variable",level:3},{value:"Micro Analytic Service",id:"micro-analytic-service",level:2},{value:"500 Internal Server Error - EXECUTEMETHOD failed for HTTP POST method with URL",id:"500-internal-server-error---executemethod-failed-for-http-post-method-with-url",level:3},{value:"SAS Container Runtime",id:"sas-container-runtime",level:2},{value:"SSL Error: Missing CA trust list",id:"ssl-error-missing-ca-trust-list",level:3}];function d(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"troubleshooting-guide",children:"Troubleshooting Guide"})}),"\n",(0,r.jsx)(t.p,{children:"The Troubleshooting Guide tries to provide solution orientied fixes to reported issues. If your issue is not on this please raise an issue or if you already have a solution please contribute it as a pull request."}),"\n",(0,r.jsx)(t.h2,{id:"sas-intelligent-decisioning",children:"SAS Intelligent Decisioning"}),"\n",(0,r.jsx)(t.p,{children:"This part of the troubleshooting guide describes issues that can occur when working with this in SAS Intelligent Decisioning."}),"\n",(0,r.jsx)(t.h3,{id:"duplicate-declaration-for-variable",children:"Duplicate declaration for VARIABLE"}),"\n",(0,r.jsxs)(t.p,{children:["This error can be encountered during testing within SAS Intelligent Decisioning. Here is how the issue might show up for a variable called ",(0,r.jsx)(t.strong,{children:"llmurl"}),":"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Duplicate Variable Error",src:i(6632).A+"",width:"771",height:"620"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-SAS",children:"ERROR: Compilation error.\nERROR: Line 167: Duplicate declaration for llmurl.\n"})}),"\n",(0,r.jsxs)(t.p,{children:["This error occurs when your model (for example the prompt template model) has the same variable twice in its ",(0,r.jsx)(t.em,{children:"Variable"})," tab inside of SAS Model Manager. If that is the case, you have identified the source of the error. In order to fix this, please ensure that you are using the current version of the ",(0,r.jsx)(t.em,{children:"Prompt Builder UI"})," (compare the versions using the ",(0,r.jsx)(t.a,{href:"https://github.com/sassoftware/sas-portal-framework-for-sas-viya/blob/main/CHANGELOG.md",children:"https://github.com/sassoftware/sas-portal-framework-for-sas-viya/blob/main/CHANGELOG.md"}),"). If you created the model not using that tool, please make sure that model variables are correctly updated when creating new versions of the model."]}),"\n",(0,r.jsx)(t.h2,{id:"micro-analytic-service",children:"Micro Analytic Service"}),"\n",(0,r.jsx)(t.p,{children:"This part of the troubleshooting guide describes issues that can occur when publishing decisions or models that call the LLMs to the SAS Micro Analytic Service (MAS)."}),"\n",(0,r.jsx)(t.h3,{id:"500-internal-server-error---executemethod-failed-for-http-post-method-with-url",children:"500 Internal Server Error - EXECUTEMETHOD failed for HTTP POST method with URL"}),"\n",(0,r.jsxs)(t.p,{children:["This error occurs because the endpoint under which the LLMs are hosted doesn't have a valid certificate from the standpoint of your SAS Micro Analytic Service. This fix has to be done by an administrator with the ability to patch the SAS Viya deployment - for more information check out the ",(0,r.jsx)(t.a,{href:"https://go.documentation.sas.com/doc/en/mascdc/default/masag/p0kuxnv51taahin1cf23yhr0g23z.htm",children:"SAS documentation"}),":"]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Go to ",(0,r.jsx)(t.em,{children:"$BASE_PATH/sasinstall/sas-bases/examples/sas-microanalytic-score/config"})," and copy the ",(0,r.jsx)(t.em,{children:"mas-add-environment-variables.yaml"})]}),"\n",(0,r.jsx)(t.li,{children:"Then adjust the yaml in the following way - this assumes that you have deployed the LLMs behind the same ingress as SAS Viya if not you need to point it to your certificate accordingly:"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"---\napiVersion: builtin\nkind: PatchTransformer\nmetadata:\n  name: mas-add-environment-variables\npatch: |-\n  - op: add\n    path: /spec/template/spec/containers/0/env/-\n    value:\n      name: SSLCALISTLOC\n      value: /security/trustedcerts.pem\ntarget:\n  group: apps\n  kind: Deployment\n  name: sas-microanalytic-score\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"3",children:["\n",(0,r.jsxs)(t.li,{children:["Add the transformer to your ",(0,r.jsx)(t.em,{children:"kustomization.yaml"})," and apply it."]}),"\n",(0,r.jsx)(t.li,{children:"Check the environment variables of the sas-microanalytic-score pod definition and there under the sas-microanalytic-score container check that the environment variable was added accordingly."}),"\n",(0,r.jsx)(t.li,{children:"Now rerun your the decision/model call and check that the error has been actually fixed."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"sas-container-runtime",children:"SAS Container Runtime"}),"\n",(0,r.jsx)(t.p,{children:"This part of the troubleshooting guide describes issues that can occur when publishing decisions or models that call the LLMs to a SAS Container Runtime (SCR) publishing destination (independent of AWS, Azure, GCP or Private Docker)."}),"\n",(0,r.jsx)(t.h3,{id:"ssl-error-missing-ca-trust-list",children:"SSL Error: Missing CA trust list"}),"\n",(0,r.jsxs)(t.p,{children:["This error is mostly likely caused by the fact that you are using a certificate for the LLM containers that isn't valid according other SCR containers - this might be because you are using a self-signed certificate or organization signed. This fix has to be done by the person that deploys the container - for more information check out the ",(0,r.jsx)(t.a,{href:"https://go.documentation.sas.com/doc/en/mascrtcdc/default/mascrtag/p0r7reghey2nmsn1lubyxbibzwjh.htm",children:"SAS documentation"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:'---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: <CONTAINER>\n  namespace: <NS>\nspec:\n  selector:\n    matchLabels:\n      app: <APP_NAME>\n  template:\n    metadata:\n      labels:\n        app: <APP_NAME>\n    spec:\n      containers:\n      - name: <APP_NAME>\n        image: <CONTAINER_REGISTRY>/<CONTAINER>:latest\n        resources:\n          requests:\n            memory: "4000Mi"\n            cpu: "1000m"\n        ports:\n        - containerPort: 8080\n          protocol: TCP\n        env:\n        - name: SAS_SCR_SSL_CERTIFICATE\n          value: /ssl/certificate-file.crt\n ... Shortend for brevity\n'})}),"\n",(0,r.jsx)(t.p,{children:"Please note that you have to mount the certificate file in a volume to the container!"})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},6632:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/Duplicate-Variable-Error-2c2ebd60f3784009471b60b61a9eaf3f.png"},8453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>a});var n=i(6540);const r={},s=n.createContext(r);function o(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);