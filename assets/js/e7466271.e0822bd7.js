"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[669],{7173:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"Administration-Guide/Logging-&-Monitoring","title":"Logging","description":"The logs from the LLM containers is standardized across all of the different models.","source":"@site/docs/Administration-Guide/Logging-&-Monitoring.md","sourceDirName":"Administration-Guide","slug":"/Administration-Guide/Logging-&-Monitoring","permalink":"/sas-agentic-ai-accelerator/Administration-Guide/Logging-&-Monitoring","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"defaultSidebar","previous":{"title":"Container-Deployment","permalink":"/sas-agentic-ai-accelerator/Administration-Guide/Container-Deployment"},"next":{"title":"Deploying the LLM Prompt Builder","permalink":"/sas-agentic-ai-accelerator/Administration-Guide/Setup-Additional-UIs"}}');var i=t(4848),a=t(8453);const s={sidebar_position:9},r="Logging",l={},d=[{value:"Simplified Logging via a Script",id:"simplified-logging-via-a-script",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"logging",children:"Logging"})}),"\n",(0,i.jsx)(n.p,{children:"The logs from the LLM containers is standardized across all of the different models.\nThis has been done in order to be able to parse all of the relevant information from the logs and create monitoring on top of them."}),"\n",(0,i.jsxs)(n.p,{children:["In order to make use of these logs, which are written to the standard out of each container, you must collect the logs.\nIf you do not have an established logging and monitoring process, you can use the simplified logging script provided below.\nOtherwise, if you do have an established way of collecting logs, ensure that you can export them to a folder that can be accessed from SAS Studio as a ",(0,i.jsx)(n.code,{children:".log"})," file (as that it is the input for the parsing utilities)."]}),"\n",(0,i.jsxs)(n.p,{children:["For more information on how to parse the log and load it into to SAS please take a look at ",(0,i.jsx)(n.code,{children:"SAS-Viya-Integrations/Logging-Monitoring"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"simplified-logging-via-a-script",children:"Simplified Logging via a Script"}),"\n",(0,i.jsx)(n.p,{children:"Only use this script if you do not have a more robust process in place."}),"\n",(0,i.jsxs)(n.p,{children:["Create a script\u2014for example ",(0,i.jsx)(n.code,{children:"collect_llm_logs.sh"}),"\u2014and ensure that it is executable.\nUse the code below and change both the namespace and the log path.\nThe namespace should be the namespace into which you have deployed the models, and the path needs to be reachable from inside of SAS Studio.\nYou can also change the logging interval; note that any changes you make here will have to be reflected in the entry for the ",(0,i.jsx)(n.code,{children:"crontab"}),".\nThe default here also replaces the log file as the assumption is that you pick up the new entries using the parsing script and append (though a full replacement is also supported)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Set the script variables for your environment\nllm_namspace="llm"\nllm_log_path="/viya-share/pvs/sasdata/data/llm/llms.log"\nllm_logging_interval="1h"\n# Remove the next line to append to the log file isntead\nrm $llm_log_path\nfor pod in $(kubectl get pods -n $llm_namspace -o name); do\n  kubectl logs -n $llm_namspace $pod --all-containers --since=$llm_logging_interval >> $llm_log_path\ndone\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Next add the following entry to your crontab (",(0,i.jsx)(n.code,{children:"crontab -e"}),"), adjusting your path to the script:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"0 * * * * /viya-share/pvs/sasdata/data/llm/collect_llm_logs.sh\n"})}),"\n",(0,i.jsx)(n.p,{children:"This entry will run the log collection script at the top of every hour."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var o=t(6540);const i={},a=o.createContext(i);function s(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);