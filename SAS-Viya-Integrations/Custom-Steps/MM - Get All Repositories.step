{"creationTimeStamp":"2024-08-03T12:31:59.641Z","modifiedTimeStamp":"2024-08-03T13:48:29.694Z","createdBy":"gerdaw","modifiedBy":"gerdaw","name":"MM - Get All Repositories.step","displayName":"MM - Get All Repositories.step","localDisplayName":"MM - Get All Repositories.step","description":"Retrieves a list of all available SAS Model Manager repositories that are available to you in the current SAS Viya environment.","localDescription":"Retrieves a list of all available SAS Model Manager repositories that are available to you in the current SAS Viya environment.","properties":{},"links":[{"method":"GET","rel":"self","href":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","uri":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","type":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"alternate","href":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","uri":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","type":"application/vnd.sas.data.flow.step.summary"},{"method":"GET","rel":"up","href":"/dataFlows/steps","uri":"/dataFlows/steps","type":"application/vnd.sas.collection","itemType":"application/vnd.sas.data.flow.step.summary"},{"method":"PUT","rel":"update","href":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","uri":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","type":"application/vnd.sas.data.flow.step","responseType":"application/vnd.sas.data.flow.step"},{"method":"DELETE","rel":"delete","href":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","uri":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932"},{"method":"POST","rel":"copy","href":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932/copy","uri":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932/copy","responseType":"application/vnd.sas.data.flow.step"},{"method":"GET","rel":"transferExport","href":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","uri":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","responseType":"application/vnd.sas.transfer.object"},{"method":"PUT","rel":"transferImportUpdate","href":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","uri":"/dataFlows/steps/878d80ca-4ee0-47e6-ad4c-d3da237e9932","type":"application/vnd.sas.transfer.object","responseType":"application/vnd.sas.summary"}],"metadataVersion":0.0,"version":2,"type":"code","flowMetadata":{"inputPorts":[],"outputPorts":[{"name":"_mgr_output","displayName":"_mgr_output","localDisplayName":"_mgr_output","description":"The table contains a list of all available SAS Model Manager repositories","localDescription":"The table contains a list of all available SAS Model Manager repositories","minEntries":1,"maxEntries":1,"defaultEntries":0,"type":"table","columnDelta":{"updateColumnArguments":["_mgr_id","_mgr_name","_mgr_description","_mgr_defaultRepository","_mgr_folderID","_mgr_createdBy","_mgr_creationTS","_mgr_modifiedBy","_mgr_modifiedTS"]},"supportsView":false,"requiresStructure":false}]},"ui":"{\n\t\"showPageContentOnly\": true,\n\t\"pages\": [\n\t\t{\n\t\t\t\"id\": \"pageDefinition\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"Definition\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_mgr_info_text\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"Connect an output table that will contain all available SAS Model Manager repositories in the SAS Viya environment, that you have access to.\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_mgr_output\",\n\t\t\t\t\t\"type\": \"outputtable\",\n\t\t\t\t\t\"label\": \"Output repository table:\",\n\t\t\t\t\t\"required\": true,\n\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"_mgr_output_definition\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Output definition\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": false,\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_mgr_id\",\n\t\t\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\t\t\"label\": \"Repository ID:\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\t\t\"visible\": false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_mgr_name\",\n\t\t\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\t\t\"label\": \"Name:\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\t\t\"visible\": false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_mgr_description\",\n\t\t\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\t\t\"label\": \"Description:\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\t\t\"visible\": false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_mgr_defaultRepository\",\n\t\t\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\t\t\"label\": \"Default repository:\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\t\t\"visible\": false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_mgr_folderID\",\n\t\t\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\t\t\"label\": \"Folder ID:\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\t\t\"visible\": false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_mgr_createdBy\",\n\t\t\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\t\t\"label\": \"Created by:\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\t\t\"visible\": false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_mgr_creationTS\",\n\t\t\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\t\t\"label\": \"Creation time stamp:\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\t\t\"visible\": false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_mgr_modifiedBy\",\n\t\t\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\t\t\"label\": \"Modified by:\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\t\t\"visible\": false\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"_mgr_modifiedTS\",\n\t\t\t\t\t\t\t\"type\": \"newcolumn\",\n\t\t\t\t\t\t\t\"label\": \"Modification time stamp:\",\n\t\t\t\t\t\t\t\"required\": false,\n\t\t\t\t\t\t\t\"placeholder\": \"\",\n\t\t\t\t\t\t\t\"hideproperties\": false,\n\t\t\t\t\t\t\t\"readonly\": false,\n\t\t\t\t\t\t\t\"visible\": false\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t\"id\": \"pageAbout\",\n\t\t\t\"type\": \"page\",\n\t\t\t\"label\": \"About\",\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"textAbout\",\n\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\"text\": \"MM - Get All Repositories step\\n==========\\n\\nThe \\\"MM - Get All Repositories\\\" custom steps performs a look up of all of the available SAS Model Manager (MM) repositories that the step user has access to.\\n\\nThis steps output can be used as input for the step MM - Get Projects in Repository\",\n\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"sectionPrereqs\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Pre-requisites\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"textPrereqs\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"Pre-requisites:  Tested on Viya version Stable 2024.07\\n\\nSAS Model Manager has be licensed and the user has to have the capability to use SAS Model Manager.\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"sectionDocumentation\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Documentation\",\n\t\t\t\t\t\"open\": false,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"textDocumentation\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"* The following SAS Viya REST-API is used: https://developer.sas.com/rest-apis/modelRepository-v8?operation=getRepositories\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"sectionChangelog\",\n\t\t\t\t\t\"type\": \"section\",\n\t\t\t\t\t\"label\": \"Changelog\",\n\t\t\t\t\t\"open\": true,\n\t\t\t\t\t\"visible\": \"\",\n\t\t\t\t\t\"children\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"id\": \"textChangelog\",\n\t\t\t\t\t\t\t\"type\": \"text\",\n\t\t\t\t\t\t\t\"text\": \"* Version: 1.0 (03AUG2024)\\n      - Initial version\",\n\t\t\t\t\t\t\t\"visible\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"syntaxversion\": \"1.3.0\",\n\t\"values\": {\n\t\t\"_mgr_output\": {\n\t\t\t\"library\": \"\",\n\t\t\t\"table\": \"\"\n\t\t},\n\t\t\"_mgr_id\": {\n\t\t\t\"value\": \"id\",\n\t\t\t\"label\": \"ID of the repository\",\n\t\t\t\"length\": 36\n\t\t},\n\t\t\"_mgr_name\": {\n\t\t\t\"value\": \"name\",\n\t\t\t\"label\": \"Name of the repository\",\n\t\t\t\"length\": 256\n\t\t},\n\t\t\"_mgr_description\": {\n\t\t\t\"value\": \"description\",\n\t\t\t\"label\": \"Repository description\",\n\t\t\t\"length\": 1000\n\t\t},\n\t\t\"_mgr_defaultRepository\": {\n\t\t\t\"value\": \"defaultRepository\",\n\t\t\t\"label\": \"Indicates if it is the default repository (1 = default)\",\n\t\t\t\"length\": 1000\n\t\t},\n\t\t\"_mgr_folderID\": {\n\t\t\t\"value\": \"folderId\",\n\t\t\t\"label\": \"Folder ID of the repository\",\n\t\t\t\"length\": 36\n\t\t},\n\t\t\"_mgr_createdBy\": {\n\t\t\t\"value\": \"createdBy\",\n\t\t\t\"label\": \"Repository creator\",\n\t\t\t\"length\": 256\n\t\t},\n\t\t\"_mgr_creationTS\": {\n\t\t\t\"value\": \"creationTimeStamp\",\n\t\t\t\"label\": \"Time of repository creation\",\n\t\t\t\"length\": 27\n\t\t},\n\t\t\"_mgr_modifiedBy\": {\n\t\t\t\"value\": \"modifiedBy\",\n\t\t\t\"label\": \"Last repository modifier\",\n\t\t\t\"length\": 256\n\t\t},\n\t\t\"_mgr_modifiedTS\": {\n\t\t\t\"value\": \"modifiedTimeStamp\",\n\t\t\t\"label\": \"Time of last repository modification\",\n\t\t\t\"length\": 27\n\t\t}\n\t}\n}","templates":{"SAS":"/***************************************************\n    Get a list of SAS Model Manager Repositories\n\n    mgr is short for:\n      Model Manager Get Repositories\n***************************************************/\n\n* Get the Viya Host URL;\n%let _mgr_viyaHost=%sysfunc(getoption(SERVICESBASEURL));\n\n* Macro to recursivly get all repositories;\n%macro _mgr_repository_pagination(_mgr_start=0, _mgr_limit=25);\n    %local _mgr_start\n        _mgr_limit\n        _mgr_ds_nobs\n        _mgr_nvar\n        _mgr_new_start;\n\n    filename _mgr_rp temp;\n\n    * https://developer.sas.com/rest-apis/modelRepository-v8?operation=getRepositories;\n    proc http method = 'Get'\n        url = \"&_mgr_viyaHost./modelRepository/repositories?start=&_mgr_start%nrstr(&)limit=&_mgr_limit.\"\n        oauth_bearer = sas_services\n        out = _mgr_rp;\n        headers 'Accept' = 'application/json';\n    quit;\n\n    libname _mgr_rp json;\n\n    * Get the number of observations where one obs = one repository;\n    proc sql noprint;\n        select count(*) into :_mgr_ds_nobs trimmed from _mgr_rp.items;\n    quit;\n\n    * Get the number of columns;\n    proc sql noprint;\n        select nvar into :_mgr_nvar trimmed from dictionary.tables where\n            libname='_MGR_RP' and memname='ITEMS';\n    quit;\n\n    * Handle the first iteration and subsequent requests;\n    %if &_mgr_start. eq 0 %then %do;\n        data &_mgr_output.;\n            length name createdBy modifiedBy $256. description $1000. defaultRepository 8.;\n            set _mgr_rp.items(drop=ordinal_root ordinal_items version);\n        run;\n    %end;\n    %else %do;\n        %if &_mgr_nvar. gt 2 %then %do;\n            proc append force nowarn base=&_mgr_output.\n                data=_mgr_rp.items(drop=ordinal_root ordinal_items version);\n            quit;\n        %end;\n    %end;\n\n    libname _mgr_rp clear;\n    filename _mgr_rp clear;\n\n    * Check if another iteration is needed;\n    %if &_mgr_ds_nobs eq &_mgr_limit and &_mgr_nvar. gt 2 %then %do;\n        %put NOTE: Getting more repositories;\n        %let _mgr_new_start=%eval(&_mgr_start. + &_mgr_limit.);\n        %_mgr_repository_pagination(_mgr_start=&_mgr_new_start., _mgr_limit=&_mgr_limit.);\n    %end;\n%mend _mgr_repository_pagination;\n\n* Get a table of all repositories;\n%_mgr_repository_pagination();\n\n* Clean up;\n%symdel _mgr_viyaHost;\n%sysmacdelete _mgr_repository_pagination;"}}