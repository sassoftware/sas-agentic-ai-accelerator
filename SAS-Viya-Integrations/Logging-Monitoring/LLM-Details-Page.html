<!DOCTYPE html>
<!--
Copyright Â© 2024, SAS Institute Inc., Cary, NC, USA.  All Rights Reserved.
SPDX-License-Identifier: Apache-2.0
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Data Visualization</title>
    <style>
        /* General body styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            margin: 0; /* Remove default body margin */
        }

        /* Container for the entire visualization */
        .container {
            width: 100%;
            background-color: #ffffff;
            border-radius: 1.5rem; /* Equivalent to Tailwind's rounded-3xl */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* Equivalent to Tailwind's shadow-xl */
            overflow: hidden;
            border: 1px solid #e2e8f0; /* Light border */
        }

        /* Content grid styling */
        .content {
            padding: 2rem; /* Equivalent to Tailwind's p-8 */
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Equivalent to Tailwind's grid-cols-auto-fit */
            gap: 1.5rem; /* Equivalent to Tailwind's gap-6 */
        }

        /* Individual data item box styling */
        .data-item {
            background-color: #f8fafc; /* Lighter white for items, equivalent to Tailwind's bg-slate-50 */
            padding: 1.25rem; /* Equivalent to Tailwind's p-5 */
            border-radius: 0.75rem; /* Equivalent to Tailwind's rounded-xl */
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); /* Equivalent to Tailwind's shadow-md */
            display: flex;
            flex-direction: column;
        }

        /* Label for each data item */
        .data-item .label {
            font-weight: 600; /* Semi-bold label */
            color: #475569; /* Slate 600 */
            margin-bottom: 0.5rem; /* Equivalent to Tailwind's mb-2 */
            font-size: 0.9rem; /* Slightly smaller font for label */
        }

        /* Value for each data item */
        .data-item .value {
            color: #1e293b; /* Slate 900 */
            font-size: 1rem; /* Standard font size */
            line-height: 1.5;
            flex-grow: 1; /* Allow value to take up available space */
            word-wrap: break-word; /* Ensure long words break */
        }

        /* Special styling for description value */
        .data-item .value.description {
            font-style: italic;
            font-size: 0.95rem; /* Slightly smaller for description */
            color: #334155; /* Slate 700 */
        }

        /* Loader animation styling */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4f46e5;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none; /* Hidden by default */
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr; /* Single column layout on smaller screens */
                padding: 1.5rem; /* Reduced padding for content */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="content" id="llm-data-display">
            <!-- Data will be populated here by JavaScript -->
        </div>
        <div id="loader" class="loader"></div>
    </div>

    <script>
        if (window.addEventListener) {
            // For standards-compliant web browsers
            window.addEventListener('message', onMessage, false);
        } else {
            window.attachEvent('onmessage', onMessage);
        }

        // Retrieve data and begin processing
        function onMessage(event) {
            renderLLMData(event.data);
        }

        // Function to format values for display
        function formatValue(value, label, type) {
            if (value === null || value === undefined || value === "") {
                return "N/A";
            }
            if (typeof value === 'string' && value.trim() === ".") {
                return "N/A";
            }
            if (type === "date" && typeof value === 'string') {
                // Assuming date format is YYYY/MM/DD
                try {
                    const parts = value.split('/');
                    if (parts.length === 3) {
                        const date = new Date(parts[0], parts[1] - 1, parts[2]);
                        return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                    }
                } catch (e) {
                    console.error("Error parsing date:", value, e);
                    // Fallback to original value if parsing fails
                }
            }
            if (type === "number") {
                if (label.includes("Price") || label.includes("Cost")) {
                    return `$${value.toFixed(6)}`; // Format prices with currency and fixed decimals
                }
                if (label === "Size") {
                    // Convert large numbers to a more readable format (e.g., Billions)
                    if (value >= 1e9) {
                        return `${(value / 1e9).toFixed(1)} Billion`;
                    }
                }
            }
            return value;
        }

        // Function to render the data
        function renderLLMData(jsonData) {
            const displayContainer = document.getElementById('llm-data-display');
            displayContainer.innerHTML = ''; // Clear previous content

            if (!jsonData || !jsonData.data || jsonData.data.length === 0 || !jsonData.columns || jsonData.columns.length === 0) {
                displayContainer.innerHTML = '<p style="text-align: center; color: #ef4444; font-weight: 600;">No LLM data available to display.</p>';
                return;
            }

            const latestRow = jsonData.data[0]; // Get the first (and only) row of data
            const columns = jsonData.columns;

            // Create a map for quick lookup of column index by label
            const columnMap = new Map();
            columns.forEach((col, index) => {
                columnMap.set(col.label, { ...col, index: index });
            });

            // Define the desired order of labels
            const desiredOrder = [
                "Model",
                "Description",
                "Provider",
                "Release Date",
                "License",
                "Size",
                "Knowledge Cutoff",
                "Cost Type",
                "Second Cost",
                "Input Token Price",
                "Output Token Price",
                "Context Length",
                "Temperature",
                "Top P",
                "Top K",
                "Max Tokens"
            ];

            desiredOrder.forEach(label => {
                const colInfo = columnMap.get(label);

                if (colInfo) {
                    const value = latestRow[colInfo.index];
                    const formattedVal = formatValue(value, label, colInfo.type);

                    // Only display the box if the formatted value is not "N/A"
                    if (formattedVal !== "N/A") {
                        const dataItem = document.createElement('div');
                        dataItem.className = 'data-item';

                        const labelDiv = document.createElement('div');
                        labelDiv.className = 'label';
                        labelDiv.textContent = label;

                        const valueDiv = document.createElement('div');
                        valueDiv.className = `value ${label === 'Description' ? 'description' : ''}`;
                        valueDiv.textContent = formattedVal;

                        dataItem.appendChild(labelDiv);
                        dataItem.appendChild(valueDiv);
                        displayContainer.appendChild(dataItem);
                    }
                }
            });
        }
    </script>
</body>
</html>